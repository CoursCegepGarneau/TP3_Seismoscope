<UserControl x:Class="Seismoscope.View.SensorView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Seismoscope.View"
        mc:Ignorable="d"
        d:DesignHeight="600" d:DesignWidth="1000"
        Loaded="UserControl_Loaded">

    <Grid>
        <!-- Deux colonnes : menu (gauche) + contenu principal (droite) -->
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ✅ Menu vertical fixe à gauche -->
        <StackPanel Grid.Column="0" Background="#F5F5F5" Margin="10">
            <Button Content="Accueil" Margin="10" FontSize="16" Foreground ="#1974D2"  Background ="#F5F5F5" Command="{Binding NavigateToHomeViewCommand}" />
            <Button Content="Gestion des capteurs" Padding="4,0,4,2"  Margin="10" FontSize="16" Foreground ="white" Background ="#1974D2" Command="{Binding AddSensorCommand}" />
            <Button Content="Charger Données ?" Margin="10" Height="25" Command="{Binding ChargerDonnees}"></Button>
        </StackPanel>

        <!-- ✅ Contenu principal à droite -->
        <Grid Grid.Column="1" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <!-- Boutons -->
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Margin="0,14,0,10">
                <TextBlock Text="Les capteurs de ma Station: "
                   FontSize="24"
                   FontWeight="Bold"
                   Foreground="#1974D2"
                   Margin="10,0,0,20"/>

                <!-- 🔼 Boutons en haut -->
                <StackPanel Orientation="Horizontal" Margin="10,0,10,5" Grid.Row="0" HorizontalAlignment="Right">
                    <Button Content="Activer/Désactiver" Padding="4,0,4,2" Margin="0,0,10,0" FontSize="16" Foreground ="#1974D2"  Background ="#F5F5F5" Command="{Binding UpdateSensorStatusCommand}"  />
                    <Button Content="Modifier Fréquence" Padding="4,0,4,2"  Margin="0,0,10,0" FontSize="16" Foreground ="#1974D2" Background ="#F5F5F5" Command="{Binding ChangeFrequencyCommand}" />
                    <Button Content="Modifier Seuil" Padding="4,0,4,2"  Margin="0,0,10,0" FontSize="16" Foreground ="#1974D2"  Background ="#F5F5F5" Command="{Binding ChangeTresholdCommand}" />
                    <Button Content="Supprimer Capteur" Padding="4,0,4,2"  FontSize="16" Foreground ="#1974D2" Background ="#F5F5F5" Command="{Binding DeleteSensorCommand}" />
                </StackPanel>
            </StackPanel>
            <!-- 🧾 DataGrid au centre -->
            <DataGrid Grid.Row="1"
                      Background="white"
                      ItemsSource="{Binding Sensors}"
                      SelectedItem="{Binding SelectedSensor}"
                      BorderThickness="0"
                      GridLinesVisibility="None"
                      AutoGenerateColumns="False"
                      CanUserAddRows="False"
                      IsReadOnly="True"
                      Margin="10,0,5,20">
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="Background" Value="#f0f4fb"/>
                        <Setter Property="Foreground" Value="Black"/>

                        <Style.Triggers>
                            <Trigger Property="IsSelected" Value="True">

                                <Setter Property="Foreground" Value="Black"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#d6e8ff"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </DataGrid.RowStyle>
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="50" IsReadOnly="True"/>
                    <DataGridTextColumn Header="Nom" Binding="{Binding Name}" Width="150" IsReadOnly="True"/>
                    <DataGridTextColumn Header="Fréquence" Binding="{Binding Frequency}" Width="100" IsReadOnly="True"/>
                    <DataGridTextColumn Header="Seuil" Binding="{Binding Treshold}" Width="100" IsReadOnly="True"/>
                    <DataGridTextColumn Header="État" Binding="{Binding SensorStatus}" Width="100" IsReadOnly="True"/>
                    <DataGridTextColumn Header="Station" Binding="{Binding assignedStation.Nom}" Width="200" IsReadOnly="True" FontWeight="Bold"/>
                    <DataGridTemplateColumn Header="Analyse" Width="100">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="Analyser"
                    Command="{Binding DataContext.AnalyzeSensorCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                    CommandParameter="{Binding}" 
                    Padding="4"
                    Foreground="White"
                    FontSize="12"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

            <!-- 📦 Futur contenu (ex. : détails capteur sélectionné) -->
            <Border Grid.Row="2" Height="150" Background="#EEE" CornerRadius="5" Padding="10">
                <TextBlock Text="Contenu à venir ici..." VerticalAlignment="Center" HorizontalAlignment="Center" FontStyle="Italic"/>
            </Border>
        </Grid>
    </Grid>
</UserControl>
